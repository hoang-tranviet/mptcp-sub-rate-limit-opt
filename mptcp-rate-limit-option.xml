<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.12 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-mptcp-sub-rate-limit-opt-00" category="info">

  <front>
    <title abbrev="mptcp-sub-rate-limit-opt">Multipath TCP Subflow Rate Limit Option</title>

    <author initials="V." surname="Tran" fullname="Viet-Hoang Tran">
      <organization>Universite catholique de Louvain</organization>
      <address>
        <email>hoang.tran@uclouvain.be</email>
      </address>
    </author>
    <author initials="O." surname="Bonaventure" fullname="Olivier Bonaventure">
      <organization>Universite catholique de Louvain</organization>
      <address>
        <postal>
          <street>Pl. Ste Barbe, 2</street>
          <city>Louvain-la-Neuve</city>
          <code>1348</code>
          <country>Belgium</country>
        </postal>
        <email>olivier.bonaventure@uclouvain.be</email>
      </address>
    </author>

    <date year="2019" month="July" day="05"/>

    <area>TSV</area>
    <workgroup>MPTCP Working Group</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document defines an MPTCP Option for hosts to request their peers to limit the maximum transfer rate on a subflow.</t>



    </abstract>


  </front>

  <middle>


<section anchor="problems" title="Introduction">

<t>Multipath TCP <xref target="RFC6824"/> <xref target="I-D.ietf-mptcp-rfc6824bis"/> is used in various use cases <xref target="RFC8040"/>. In several situations, a Multipath TCP host would like its peer to limit the sending rate over a subflow.</t>

<t>It is common that the mobile clients have a limited cellular data subscription. Even if this is not the case, mobile network operators
may still silently throttle the networking capacity of those customers
who have used up a large amount of cellular data. As the time of
this writing, a good LTE or 5G connection running at full speed in a
few hour could squeze all monthly budget cellular quota. A common
scenario is that the mobile users want to limit the monetary cost of
using cellular networks or to avoid running out of the mobile data
quota. However, most of the traffic are down-streamed - on which
the clients cannot control directly. For this, the clients would desire
the servers to limit the maximum throughput on the cellular network
subflow. This is more important when the mobile clients are roaming
abroad where the monetary cost for cellular data is usually very high.</t>

<t>As discussed on the multipathtcp IETF mailling list [99], this rate-control mechanism can also be used when a client wants to tell a sender to close a subflow gracefully by requesting the zero transfer rate. Though the client may send a TCP-RST on this subflow instead, in-flight data would be lost and must be reinjected over other subflows. Another solution is to send an MP_PRIO option to the sender to put the cellular subflow into backup mode, but this request could be overriden by the sender’s local policy.</t>

</section>
<section anchor="Terminology" title="Terminology">
<t>In this document, the key words “MUST”, “MUST NOT”, “REQUIRED”,
“SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”,
and “OPTIONAL” are to be interpreted as described in BCP 14, RFC 2119 <xref target="RFC2119"/>.</t>

</section>
<section anchor="ops" title="The Multipath TCP Subflow Rate Limit (SRL) Option">

<section anchor="format" title="Option Format">

<t>The format of the SRL option is depicted in Fig. <xref target="figformat"/>:</t>

<figure title="MPTCP Subflow Rate Limit Option Format" anchor="figformat"><artwork><![CDATA[
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +---------------+---------------+-------+-------+---------------+
   |     Kind      |  Length = 5   |Subtype| (rsv) | Requested Rate|
   +---------------+---------------+-------+-------+---------------+
   |       Requested Rate                          |
   +-----------------------------------------------+

]]></artwork></figure>

<t>In the SRL option, the Requested Rate (32 bits) is specified in IEEE 754 binary32 format (single-precision binary floating-point format). The same format has been used in <xref target="RFC3630"/> to specify the maximum bandwidth. This format is as follows:</t>

<figure title="IEEE binary32 format" anchor="figIEEE"><artwork><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |S|    Exponent   |                  Fraction                   |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

]]></artwork></figure>

<t><list style="hanging">
  <t hangText=': Sign bit (1 bit). MUST be set to zero.'>
  Exponent (8 bits) is the exponent base 2 in “excess 127” notation.</t>
  <t>Fraction (23 bits) is the mantissa - 1, with an implied binary
 point in front of it.</t>
</list></t>

<t>Thus, the above represents the value:</t>

<figure><artwork><![CDATA[
  (-1)**(S) * 2**(Exponent-127) * (1 + Fraction)
]]></artwork></figure>

<t>The unit of this value is Kilobits per second (Kbps).</t>

</section>
<section anchor="srl-option-and-local-policies" title="SRL Option and Local Policies">

<t>Note that the SRL option is an indicative value. Upon reception of this option, the receiver MAY choose to set the maximum rate on the same subflow.</t>

<t>Like all Multipath TCP options, the SRL Option is exchanged without any protection from TCP’s reliability mechanisms.  Therefore, implementations MUST NOT assume that it is transferred reliably. Implementations that use the SRL option can transmit the SRL option at any time. Since the utilisation of this option is not negotiated during the connection handshake, a host MUST NOT send more than three SRL options on a connection where it has not received any SRL option.</t>

</section>
</section>
<section anchor="implementation-and-interoperability" title="Implementation and Interoperability">

<t>If TCP Pacing is supported, implementations MAY use this mechanism to implement the rate control.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Since the SRL option is neither encrypted nor authenticated, on-path attackers and middleboxes could remove, add or modify the SRL option on observed Multipath TCP connections. However, the incentive of manipulating this option is unclear.</t>

<t>For example, an on-path middle man may insert an option to throttle the rate on a subflow to nearly zero, effectively stall the subflow. However, if an attacker has that capability, it could instead drop all packets or inject the TCP-RST/MPTCP-FASTCLOSE.</t>

<t>On the other hand, the on-path middlebox may increase the rate-limit value in the exchanged option to a very high value. This effectively has the same effect as filtering out the option.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>IANA is requested to assign a MPTCP option subtype for the SRL option from the “MPTCP Option Subtypes” available at https://www.iana.org/assignments/tcp-parameters/tcp-parameters.xhtml</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>




    </references>

    <references title='Informative References'>





<reference  anchor="RFC6824" target='https://www.rfc-editor.org/info/rfc6824'>
<front>
<title>TCP Extensions for Multipath Operation with Multiple Addresses</title>
<author initials='A.' surname='Ford' fullname='A. Ford'><organization /></author>
<author initials='C.' surname='Raiciu' fullname='C. Raiciu'><organization /></author>
<author initials='M.' surname='Handley' fullname='M. Handley'><organization /></author>
<author initials='O.' surname='Bonaventure' fullname='O. Bonaventure'><organization /></author>
<date year='2013' month='January' />
<abstract><t>TCP/IP communication is currently restricted to a single path per connection, yet multiple paths often exist between peers.  The simultaneous use of these multiple paths for a TCP/IP session would improve resource usage within the network and, thus, improve user experience through higher throughput and improved resilience to network failure.</t><t>Multipath TCP provides the ability to simultaneously use multiple paths between peers.  This document presents a set of extensions to traditional TCP to support multipath operation.  The protocol offers the same type of service to applications as TCP (i.e., reliable bytestream), and it provides the components necessary to establish and use multiple TCP flows across potentially disjoint paths.  This  document defines an Experimental Protocol for the Internet community.</t></abstract>
</front>
<seriesInfo name='RFC' value='6824'/>
<seriesInfo name='DOI' value='10.17487/RFC6824'/>
</reference>



<reference anchor="I-D.ietf-mptcp-rfc6824bis">
<front>
<title>TCP Extensions for Multipath Operation with Multiple Addresses</title>

<author initials='A' surname='Ford' fullname='Alan Ford'>
    <organization />
</author>

<author initials='C' surname='Raiciu' fullname='Costin Raiciu'>
    <organization />
</author>

<author initials='M' surname='Handley' fullname='Mark Handley'>
    <organization />
</author>

<author initials='O' surname='Bonaventure' fullname='Olivier Bonaventure'>
    <organization />
</author>

<author initials='C' surname='Paasch' fullname='Christoph Paasch'>
    <organization />
</author>

<date month='June' day='8' year='2019' />

<abstract><t>TCP/IP communication is currently restricted to a single path per connection, yet multiple paths often exist between peers.  The simultaneous use of these multiple paths for a TCP/IP session would improve resource usage within the network and, thus, improve user experience through higher throughput and improved resilience to network failure.  Multipath TCP provides the ability to simultaneously use multiple paths between peers.  This document presents a set of extensions to traditional TCP to support multipath operation.  The protocol offers the same type of service to applications as TCP (i.e., reliable bytestream), and it provides the components necessary to establish and use multiple TCP flows across potentially disjoint paths.  This document specifies v1 of Multipath TCP, obsoleting v0 as specified in RFC6824, through clarifications and modifications primarily driven by deployment experience.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-mptcp-rfc6824bis-18' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-mptcp-rfc6824bis-18.txt' />
</reference>



<reference  anchor="RFC8040" target='https://www.rfc-editor.org/info/rfc8040'>
<front>
<title>RESTCONF Protocol</title>
<author initials='A.' surname='Bierman' fullname='A. Bierman'><organization /></author>
<author initials='M.' surname='Bjorklund' fullname='M. Bjorklund'><organization /></author>
<author initials='K.' surname='Watsen' fullname='K. Watsen'><organization /></author>
<date year='2017' month='January' />
<abstract><t>This document describes an HTTP-based protocol that provides a programmatic interface for accessing data defined in YANG, using the datastore concepts defined in the Network Configuration Protocol (NETCONF).</t></abstract>
</front>
<seriesInfo name='RFC' value='8040'/>
<seriesInfo name='DOI' value='10.17487/RFC8040'/>
</reference>



<reference  anchor="RFC3630" target='https://www.rfc-editor.org/info/rfc3630'>
<front>
<title>Traffic Engineering (TE) Extensions to OSPF Version 2</title>
<author initials='D.' surname='Katz' fullname='D. Katz'><organization /></author>
<author initials='K.' surname='Kompella' fullname='K. Kompella'><organization /></author>
<author initials='D.' surname='Yeung' fullname='D. Yeung'><organization /></author>
<date year='2003' month='September' />
<abstract><t>This document describes extensions to the OSPF protocol version 2 to support intra-area Traffic Engineering (TE), using Opaque Link State Advertisements.</t></abstract>
</front>
<seriesInfo name='RFC' value='3630'/>
<seriesInfo name='DOI' value='10.17487/RFC3630'/>
</reference>




    </references>



  </back>

<!-- ##markdown-source:
H4sIANBjIF0AA61Y627cuBX+r6c48P6onYwmvuXiAQLUSeyNEcd2PU6KYrFY
UBJnho0kaklqxpPERV+jr9cn6XdIam6xd7dNlQDWiNThOd/5zk1pmiZOuVIO
6H1bOtUIN6Gb11c0bLNRqWd0LZykc1UpR5eNU7pORJYZOR1Q1bi8SW2bpQZ7
0pL3pLpxSaHzWlSQWBgxculD+9Ld3aTAkwHt7+4dpbvP092nSY4HY23mA1L1
SCeJasyAnGmt29/dPdrdT4SRYkA3w4/JTJtPY6PbBqpfscp/xQNVj+lHfph8
knPsKAZ0VjtpaunSN6xOklgn6uIXUeoaR8+lTRo1oJ+czntktXFGjizu5hXf
/JwkonUTbQYJpQnhUrUd0Mc+3RhR+wfB1I8KB7zVAscvVrQZi1p9FozagD7U
aiqNVYATRk50qX5tJRUAV7dTocIrshKqHNCEBfUdBP25zcuw3s/kmg6XfXql
azGVtWuNXFHlslRTJc03q/+DOhZoSDegq7JPQ+x8JUwme7TvF3Pl4Ka4PS1F
eiHbaTgq1wUU2Ts4fBF/trVjn76S5Vi11aqpOmjbz5bartuc1NpUUHoq4QO6
Pn29v7d3NAAzwI/1hWcv9g/59ix904c7RpF5ZpTzSqZs3Pdi93A33h48O8Bt
kqYpiQzWihwEuZkoSyBxW0EfQDJStbQk6kizEAaE0+En6yw5TUYCPevITaQy
1Eggy4891/khVeJWVW1F7FM7gnc4FghiBNkQaf0k6FGpoihhNmhrdNHm/rB4
ffmhMTorZWXvkpcrV5KsB++XLxGOuzvcP4gHVmFpa2UBStFUGKVb/xuUsDDZ
i2G07u76CCOyEpQRJYE1racRAkVs5A2GhGa6LQtY/0mSAkCMxzocVtYFh2pA
AVLXcDhzrFeuqwqmu4mIEOpMlVCtVHCLpQnogre8TBiQy7JsS2EIKcXLsrlR
3lN9OgGxSI0gBWLxv9ZBIlvZ6+QiQ3BGId3ARqeNTSoxRwSokg0ucWY5x1tG
O2RL/3p8g+3IRSM4HkjzKZoRRMrSFXiQzCY6KOuBbhtWWpgxlK84LviVNeX7
dGy9fKcqgDNKvNozoxxOYsDHWhd0fnOCiKanPwKnupaBJqata1YHiI1a1hvI
e9+KZCRn8E1rOBjhGwu+foYK2ASQ3QS2ZW0xlm6py6+t9spERyQ2lzVThBHc
dApMA+NnAuas0x5J1gkzhwzLliat9XB1Z0QILZuCF8VUq2JhhW5dwHNxDMOT
RL3e6hnTkf1nF/sQXqORyglVAhE8q1POYMiKBaUcbLOJyieJd31kUS5qZgMw
RLSVVCgDKMt5n05ZIwDfo9XtgdiFtNiXBCKb6cPBDra040nDdtRBzobhSUd6
uoncrDRUV1WDSsRoziayvo/9bKDRogJOKMi4K3irkfegzolqPTp80Lfw/Zyg
/JwmajxB2IF2hbIgLvM0Klx1wY3MQWcnN6fEabtk95QKwn86Ovq5FwLLV/cO
yErmE1QbWzHCoJnVlMUI8CaJaInnjIfPQUXOAsgMIVugCFi5zAs0RnaWTGtQ
dd5lXFaE9fwsjV5Prgwpo7/iP/IRjQMgFbkqvR7eBDuhfXcKaquToujhJh2V
AMYFzILnYUPJmKKDADS4wQMjVf13sIZB40ymcaDp5FkEUB2f6LL1Uaq8vUEP
Liq/XF2fXSLv+EVGIibIAAOzZ406S02xmon8E1JKhYLbQwS76IpYjvJOaVbM
qALAZ/MV+f/+578sDMqR0xsU4nwOFtxIA1bpUo/nRMvCs/J4rfagToUzu4IZ
AgbdF3H7ZWnr/YfhzVYv/KWLS39/ffKXD2fXJ2+2esnW8O3x+Tk/9DfdjuHb
yw/nb5Z3yzdfX75/f3Lx5sQvvj/+G2SwO7Yur27OLi+Oz7d8cDhPOMW9X2Mk
O0dYDlxUhSzkxFeoVnuHPW4DiHuKUO74DuUuSYgbAfn7XfH28Pp8p2sKGCnd
bFTn37xQ9ZP48qnvZzrAQ3dzxz3ByhWUCmtd0oMCHXvYD7JRnoww8VSN+zBr
pMZR2h2anX8sLt+H7dK31949z/bveXYQJexh9YAO6Sk9o+f0go7+m2cs4/G6
lelDvzf/LtZZyFev0zsFMvgLv89lPYbrXuJE/Ib33LyRX2nb2OkO1q9DnAAs
dujX/7MmtCH/HgDjde/Jv3c9XnPllwH9sPAz+ZHu5VZoWB8c5SLjtu6SEMWr
VAphvGHA9sE+ZejodphoaC5yNVKBaWcnJyf0/OkhltEkzLEvarLNBb+UKYIw
V5YPDTsIKglO32mjEaVx+w5nbWQnlOxOwARxm0lkrq5P9WHKjTvaV86jXo35
WuHNkBBmqnCTWFejKNwJ/lFyYv4mEr47EL4/Dh6n3/kvYZZ79p3cNugCarfC
xpXrlCedlcFig4vfr8c91PQUicT09xtUYRoOaKjGTBEQZ4//gBC+bmRcsnxz
yZW+j40LA7dfLDnJJJDdQob2HkCDMlvyNpfW0t7+8y3u/v3wwkIWOGzvH6xL
qdCXKGsFGse9Hs0UsgiKNRqzkhkfVGenB/bijJHRoZlXjqvopI2to8hQfFGR
EQDWt278cCrKFmNrEiDfTvd2Hj3aHu7QI9rHTWdaCn35GaB4vFB1J5SAtlax
AEBhL441f6dKnYWRC42CRDdW0Pa7rLE7PF5ydMfI54p57gv/FRd+JW3ym8km
SS60k8u+f73mMDIY6HI/jQdt+vSh4YlE5jJs63RdTS+8yp8hCGWc8onmhs+3
Rut9dDcruy41LEfFc54xeYpZr9PhkOiBFbNxPqiAznTMjSicyjOGqOeEudrF
IQqOrFjIn7iPKpVA382T3aKjRUvHScpI0BZNF1NCcuMTJmLq2hykGouGKECm
fPLp+lODw4NonjTONgT4F3gI38CZG2kvoRszVtZEsIInxj5CqM7D2+g30aWL
e/DvxuBajrVTgjN80Zqum14ZKWFzYSfik+TJ0w/3CwN9B+vnFajM3jFyVSkb
Pm+syAoTigo5nU+P/i+88ss3mavrqHi++g95fjwPLvkjTRYEjTwjrjCfwzrf
6Tc8XcniHt+BhgF5nsQWIwwoudgZeMuEjKNOnziyZA70wJLXEIM+2wSBD2mI
FxY+Wo+kWio/LMg6N/OG3VJjfONvkDibA4zV1nXqmS6cQ/vP46efR/yHo0zf
ShsbfyMr5B44rih4wMaQ0BXKlUP5f+bH2GIjiJaesyvjNr/Oytc+1sEqZErV
YDKJs9gaxdo6L6UwcCjP0/JWMIw9zhedDUFrFuKnM4xf0ji/YWUeWvno8s13
M95R4wyMhVwaeiRHI9Z6Kkv+fMO5weeNbtBeGKJGfEyHoeekDz3+lhMI1mOu
BijjWEgFCOjzTcNvOf/hIox//pQ4VT7xjVd6ejy8eX1+OTyB/ZchfYVRkIMq
ILkOA5wXUciNFHZpcfhq3uX5Ota5LpEtoRLLgb5Lw74BWsUkGBozaVjwbZEq
EV7ddxev2zIYjy+O/wC148blAArdWClruaiL+P00amtDM+4/T2xQ0mdgfra1
9sU1tu8WA95UqBLZU3LimzjX2MGTJ7PZrK9ELfrajJ+EMzlg7RP+6NkIA3Nh
4ObP/u3EVWX49MrDdPIfh+KoDBIZAAA=

-->

</rfc>

