<?xml version="1.0" encoding="UTF-8"?>
  <?xml-stylesheet type="text/xsl" href="rfc2629.xslt" ?>
  <!-- generated by https://github.com/cabo/kramdown-rfc2629 version 1.2.12 -->

<!DOCTYPE rfc SYSTEM "rfc2629.dtd" [
]>

<?rfc toc="yes"?>
<?rfc sortrefs="yes"?>
<?rfc symrefs="yes"?>

<rfc ipr="trust200902" docName="draft-hoang-mptcp-sub-rate-limit-00" category="info">

  <front>
    <title abbrev="mptcp-sub-rate-limit-opt">Multipath TCP Subflow Rate Limit Option</title>

    <author initials="V." surname="Tran" fullname="Viet-Hoang Tran">
      <organization>Universite catholique de Louvain</organization>
      <address>
        <email>hoang.tran@uclouvain.be</email>
      </address>
    </author>
    <author initials="O." surname="Bonaventure" fullname="Olivier Bonaventure">
      <organization>Universite catholique de Louvain</organization>
      <address>
        <postal>
          <street>Pl. Ste Barbe, 2</street>
          <city>Louvain-la-Neuve</city>
          <code>1348</code>
          <country>Belgium</country>
        </postal>
        <email>olivier.bonaventure@uclouvain.be</email>
      </address>
    </author>

    <date year="2019" month="July" day="08"/>

    <area>TSV</area>
    <workgroup>MPTCP Working Group</workgroup>
    <keyword>Internet-Draft</keyword>

    <abstract>


<t>This document defines a new MPTCP Option that enables hosts to request their peers to limit the maximum transfer rate on a per-subflow basis.</t>



    </abstract>


  </front>

  <middle>


<section anchor="problems" title="Introduction">

<t>Multipath TCP <xref target="RFC6824"/> <xref target="I-D.ietf-mptcp-rfc6824bis"/> is used in various use cases <xref target="RFC8040"/>. In several situations, a Multipath TCP host would like its peer to limit the sending rate over a specific subflow.</t>

<t>It is common for mobile clients to have limited cellular data subscription. Even if this is not the case, mobile network operators may still silently throttle the networking capacity of the customers
who have used up a large amount of cellular data. A good LTE or 5G connection running at full speed during
less than a few hours could consume the entire monthly budget cellular quota of many users.
This is even more important when the mobile clients are roaming
abroad where the monetary cost for cellular data can be very high. A common
scenario is that mobile users want to limit the monetary cost of
using cellular networks or to avoid running out of their mobile data
quota. Smartphones can easily rate limit their upstream bandwidth, but
unfortunately, most smartphone applications mainly receive data. For these
applications, a rate limit must happen on the server side. This rate limit could
be enforced by the application, e.g. by selecting a specific video coding scheme, but applying it at the transport layer would be more generic and could be done from the system level automatically.</t>

</section>
<section anchor="Terminology" title="Terminology">
<t>In this document, the key words “MUST”, “MUST NOT”, “REQUIRED”,
“SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”, “RECOMMENDED”, “MAY”,
and “OPTIONAL” are to be interpreted as described in BCP 14, RFC 2119 <xref target="RFC2119"/>.</t>

</section>
<section anchor="ops" title="The Multipath TCP Subflow Rate Limit (SRL) Option">

<t>This document proposes a Subflow Rate Limit option that indicates a maximum receive rate for the subflow it is sent. Like other MPTCP options, this option is not sent reliably. Hosts SHOULD resend it several times, but not more frequently than once per second.</t>

<section anchor="format" title="Option Format">

<t>The format of the SRL option is depicted in Fig. <xref target="figformat"/>:</t>

<figure title="MPTCP Subflow Rate Limit Option Format" anchor="figformat"><artwork><![CDATA[
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +---------------+---------------+-------+-------+---------------+
   |     Kind      |  Length = 7   |Subtype| (rsv) | Requested Rate|
   +---------------+---------------+-------+-------+---------------+
   |       Requested Rate                          |
   +-----------------------------------------------+

]]></artwork></figure>

<t>All reserved bits MUST be set to zero.</t>

<t>In the SRL option, the Requested Rate (32 bits) is specified in IEEE 754 binary32 format (single-precision binary floating-point format). The same format is used in <xref target="RFC3630"/> to specify the maximum bandwidth of a link. This format is as follows:</t>

<figure title="IEEE binary32 format" anchor="figIEEE"><artwork><![CDATA[
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |S|    Exponent   |                  Fraction                   |
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

]]></artwork></figure>

<t><list style="symbols">
  <t>Sign bit (1 bit) MUST be set to zero.</t>
  <t>Exponent (8 bits) is the exponent base 2 in “excess 127” notation.</t>
  <t>Fraction (23 bits) is the mantissa - 1, with an implied binary point in front of it.</t>
</list></t>

<t>Thus, the above represents the value:</t>

<figure><artwork><![CDATA[
  (-1)**(S) * 2**(Exponent-127) * (1 + Fraction)
]]></artwork></figure>

<t>The unit of this value is Kilobits per second (Kbps).</t>

</section>
<section anchor="srl-option-and-local-policies" title="SRL Option and Local Policies">

<t>Note that the SRL option is an indicative value. Upon reception of this option, the receiver SHOULD set the maximum rate on the subflow over which the option was received.</t>

<t>Like all Multipath TCP options, the SRL Option is exchanged without any protection from TCP’s reliability mechanisms.  Therefore, implementations MUST NOT assume that it is transferred reliably. Implementations that use the SRL option can transmit the SRL option at any time. Since the utilisation of this option is not negotiated during the connection handshake, a host MUST NOT send more than three SRL options on a connection.</t>

</section>
</section>
<section anchor="implementation-and-interoperability" title="Implementation and Interoperability">

<t>Implementations MAY use various mechanisms to implement the rate control policy, for example using TCP Pacing or clamping the subflow congestion window.
For old implementations that are unaware of this option, they should ignore when receive unknown MPTCP options, as specified in <xref target="RFC6824"/> and <xref target="I-D.ietf-mptcp-rfc6824bis"/>.</t>

</section>
<section anchor="security-considerations" title="Security Considerations">

<t>Since the SRL option is neither encrypted nor authenticated, on-path attackers and middleboxes could remove, add or modify the SRL option on observed Multipath TCP connections. However, manipulating this option doing not open new attacks compared to the ones documented in <xref target="RFC6181"/> <xref target="RFC7430"/>.</t>

<t>For example, an on-path middle man could insert an option to throttle the rate on a subflow to nearly zero, effectively stalling the subflow. However, if an attacker has that capability, it could instead drop all packets or inject the TCP-RST/MP-FASTCLOSE.</t>

<t>On the other hand, on-path middleboxes may increase the rate-limit value in the exchanged option to a very high value. This effectively has the same effect as filtering out the option.</t>

</section>
<section anchor="iana-considerations" title="IANA Considerations">

<t>IANA is requested to assign an MPTCP option subtype for the SRL option from the “MPTCP Option Subtypes” available at https://www.iana.org/assignments/tcp-parameters/tcp-parameters.xhtml</t>

</section>
<section anchor="acknowledgements" title="Acknowledgements">

<t>This work was supported by the ARC-SDN project and
the Walinnov MQUIC project, No. 1810018.</t>

</section>


  </middle>

  <back>

    <references title='Normative References'>





<reference  anchor="RFC2119" target='https://www.rfc-editor.org/info/rfc2119'>
<front>
<title>Key words for use in RFCs to Indicate Requirement Levels</title>
<author initials='S.' surname='Bradner' fullname='S. Bradner'><organization /></author>
<date year='1997' month='March' />
<abstract><t>In many standards track documents several words are used to signify the requirements in the specification.  These words are often capitalized. This document defines these words as they should be interpreted in IETF documents.  This document specifies an Internet Best Current Practices for the Internet Community, and requests discussion and suggestions for improvements.</t></abstract>
</front>
<seriesInfo name='BCP' value='14'/>
<seriesInfo name='RFC' value='2119'/>
<seriesInfo name='DOI' value='10.17487/RFC2119'/>
</reference>



<reference  anchor="RFC6181" target='https://www.rfc-editor.org/info/rfc6181'>
<front>
<title>Threat Analysis for TCP Extensions for Multipath Operation with Multiple Addresses</title>
<author initials='M.' surname='Bagnulo' fullname='M. Bagnulo'><organization /></author>
<date year='2011' month='March' />
<abstract><t>Multipath TCP (MPTCP for short) describes the extensions proposed for TCP so that endpoints of a given TCP connection can use multiple paths to exchange data.  Such extensions enable the exchange of segments using different source-destination address pairs, resulting in the capability of using multiple paths in a significant number of scenarios.  Some level of multihoming and mobility support can be achieved through these extensions.  However, the support for multiple IP addresses per endpoint may have implications on the security of the resulting MPTCP.  This note includes a threat analysis for MPTCP. This document is not an Internet Standards Track specification; it is published for informational purposes.</t></abstract>
</front>
<seriesInfo name='RFC' value='6181'/>
<seriesInfo name='DOI' value='10.17487/RFC6181'/>
</reference>



<reference  anchor="RFC6824" target='https://www.rfc-editor.org/info/rfc6824'>
<front>
<title>TCP Extensions for Multipath Operation with Multiple Addresses</title>
<author initials='A.' surname='Ford' fullname='A. Ford'><organization /></author>
<author initials='C.' surname='Raiciu' fullname='C. Raiciu'><organization /></author>
<author initials='M.' surname='Handley' fullname='M. Handley'><organization /></author>
<author initials='O.' surname='Bonaventure' fullname='O. Bonaventure'><organization /></author>
<date year='2013' month='January' />
<abstract><t>TCP/IP communication is currently restricted to a single path per connection, yet multiple paths often exist between peers.  The simultaneous use of these multiple paths for a TCP/IP session would improve resource usage within the network and, thus, improve user experience through higher throughput and improved resilience to network failure.</t><t>Multipath TCP provides the ability to simultaneously use multiple paths between peers.  This document presents a set of extensions to traditional TCP to support multipath operation.  The protocol offers the same type of service to applications as TCP (i.e., reliable bytestream), and it provides the components necessary to establish and use multiple TCP flows across potentially disjoint paths.  This  document defines an Experimental Protocol for the Internet community.</t></abstract>
</front>
<seriesInfo name='RFC' value='6824'/>
<seriesInfo name='DOI' value='10.17487/RFC6824'/>
</reference>



<reference  anchor="RFC7430" target='https://www.rfc-editor.org/info/rfc7430'>
<front>
<title>Analysis of Residual Threats and Possible Fixes for Multipath TCP (MPTCP)</title>
<author initials='M.' surname='Bagnulo' fullname='M. Bagnulo'><organization /></author>
<author initials='C.' surname='Paasch' fullname='C. Paasch'><organization /></author>
<author initials='F.' surname='Gont' fullname='F. Gont'><organization /></author>
<author initials='O.' surname='Bonaventure' fullname='O. Bonaventure'><organization /></author>
<author initials='C.' surname='Raiciu' fullname='C. Raiciu'><organization /></author>
<date year='2015' month='July' />
<abstract><t>This document analyzes the residual threats for Multipath TCP (MPTCP) and explores possible solutions to address them.</t></abstract>
</front>
<seriesInfo name='RFC' value='7430'/>
<seriesInfo name='DOI' value='10.17487/RFC7430'/>
</reference>




    </references>

    <references title='Informative References'>





<reference anchor="I-D.ietf-mptcp-rfc6824bis">
<front>
<title>TCP Extensions for Multipath Operation with Multiple Addresses</title>

<author initials='A' surname='Ford' fullname='Alan Ford'>
    <organization />
</author>

<author initials='C' surname='Raiciu' fullname='Costin Raiciu'>
    <organization />
</author>

<author initials='M' surname='Handley' fullname='Mark Handley'>
    <organization />
</author>

<author initials='O' surname='Bonaventure' fullname='Olivier Bonaventure'>
    <organization />
</author>

<author initials='C' surname='Paasch' fullname='Christoph Paasch'>
    <organization />
</author>

<date month='June' day='8' year='2019' />

<abstract><t>TCP/IP communication is currently restricted to a single path per connection, yet multiple paths often exist between peers.  The simultaneous use of these multiple paths for a TCP/IP session would improve resource usage within the network and, thus, improve user experience through higher throughput and improved resilience to network failure.  Multipath TCP provides the ability to simultaneously use multiple paths between peers.  This document presents a set of extensions to traditional TCP to support multipath operation.  The protocol offers the same type of service to applications as TCP (i.e., reliable bytestream), and it provides the components necessary to establish and use multiple TCP flows across potentially disjoint paths.  This document specifies v1 of Multipath TCP, obsoleting v0 as specified in RFC6824, through clarifications and modifications primarily driven by deployment experience.</t></abstract>

</front>

<seriesInfo name='Internet-Draft' value='draft-ietf-mptcp-rfc6824bis-18' />
<format type='TXT'
        target='http://www.ietf.org/internet-drafts/draft-ietf-mptcp-rfc6824bis-18.txt' />
</reference>



<reference  anchor="RFC8040" target='https://www.rfc-editor.org/info/rfc8040'>
<front>
<title>RESTCONF Protocol</title>
<author initials='A.' surname='Bierman' fullname='A. Bierman'><organization /></author>
<author initials='M.' surname='Bjorklund' fullname='M. Bjorklund'><organization /></author>
<author initials='K.' surname='Watsen' fullname='K. Watsen'><organization /></author>
<date year='2017' month='January' />
<abstract><t>This document describes an HTTP-based protocol that provides a programmatic interface for accessing data defined in YANG, using the datastore concepts defined in the Network Configuration Protocol (NETCONF).</t></abstract>
</front>
<seriesInfo name='RFC' value='8040'/>
<seriesInfo name='DOI' value='10.17487/RFC8040'/>
</reference>



<reference  anchor="RFC3630" target='https://www.rfc-editor.org/info/rfc3630'>
<front>
<title>Traffic Engineering (TE) Extensions to OSPF Version 2</title>
<author initials='D.' surname='Katz' fullname='D. Katz'><organization /></author>
<author initials='K.' surname='Kompella' fullname='K. Kompella'><organization /></author>
<author initials='D.' surname='Yeung' fullname='D. Yeung'><organization /></author>
<date year='2003' month='September' />
<abstract><t>This document describes extensions to the OSPF protocol version 2 to support intra-area Traffic Engineering (TE), using Opaque Link State Advertisements.</t></abstract>
</front>
<seriesInfo name='RFC' value='3630'/>
<seriesInfo name='DOI' value='10.17487/RFC3630'/>
</reference>




    </references>



  </back>

<!-- ##markdown-source:
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
tdM9utF9gqsMBsOTfrgMnwBPyX8AhXRHWNUaAAA=

-->

</rfc>

